DROP DATABASE IF EXISTS gift_test;
CREATE DATABASE IF NOT EXISTS gift_test;
USE gift_test;
CREATE TABLE IF NOT EXISTS certificates
(
    id               INTEGER PRIMARY KEY AUTO_INCREMENT,
    name             VARCHAR(255) NOT NULL,
    price            INTEGER      NOT NULL,
    description      VARCHAR(255) NOT NULL,
    duration         INTEGER      NOT NULL,
    create_date      DATE         NOT NULL,
    last_update_date DATE         NOT NULL
);

CREATE TABLE IF NOT EXISTS tags
(
    id   INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS certificate_tag
(
    certificate_id INTEGER NOT NULL,
    tag_id              INTEGER NOT NULL,
    PRIMARY KEY (certificate_id, tag_id),
    FOREIGN KEY (certificate_id) REFERENCES certificates (id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags (id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS users
(
    id         INTEGER PRIMARY KEY AUTO_INCREMENT,
    email      VARCHAR(255) NOT NULL,
    first_name VARCHAR(255) NOT NULL,
    last_name  VARCHAR(255) NOT NULL,
    password   VARCHAR(255) NOT NULL
);
CREATE TABLE IF NOT EXISTS orders
(
    id             INTEGER PRIMARY KEY AUTO_INCREMENT,
    certificate_id INTEGER NOT NULL,
    order_date     DATE    NOT NULL,
    order_price    INTEGER NOT NULL,
    user_id        INTEGER NOT NULL,
    FOREIGN KEY (certificate_id) REFERENCES certificates (id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE
);

INSERT INTO certificates(name, price, description, duration, create_date, last_update_date)
VALUES ('Alpha', 19, 'Crete', 54, '2021-07-16', '2025-08-01'),
       ('Beta', 80, 'Evia', 71, '2022-11-20', '2024-07-04'),
       ('Gamma', 4, 'Rhodes', 58, '2022-02-13', '2025-09-22'),
       ('Delta', 59, 'Lesbos', 2, '2020-08-04', '2025-02-26'),
       ('Epsilon', 30, 'Corfu', 71, '2022-05-05', '2025-10-23'),
       ('Zeta', 94, 'Chios', 77, '2021-07-10', '2025-05-08'),
       ('Eta', 66, 'Zakynthos', 10, '2020-04-23', '2025-03-18'),
       ('Theta', 13, 'Kefalonia', 90, '2020-06-28', '2024-01-18'),
       ('Iota', 9, 'Kos', 17, '2022-11-14', '2024-12-17'),
       ('Kappa', 22, 'Samos', 57, '2023-04-01', '2025-11-23'),
       ('Lambda', 22, 'Lefkada', 7, '2019-01-22', '2025-10-23'),
       ('Mu', 1, 'Syros', 86, '2020-11-17', '2025-03-24'),
       ('Nu', 31, 'Naxos', 12, '2021-03-23', '2025-02-22'),
       ('Xi', 0, 'Lemnos', 47, '2021-02-01', '2024-06-02'),
       ('Omicron', 78, 'Thasos', 55, '2022-01-15', '2024-11-28'),
       ('Pi', 23, 'Paros', 52, '2023-06-04', '2025-12-22'),
       ('Rho', 28, 'Tinos', 61, '2020-10-14', '2025-08-01'),
       ('Sigma', 41, 'Andros', 21, '2022-05-13', '2024-07-22'),
       ('Tau', 25, 'Icaria', 53, '2020-11-01', '2025-02-10'),
       ('Upsilon', 49, 'Karpathos', 66, '2023-05-24', '2025-05-26'),
       ('Phi', 77, 'Milos', 37, '2022-04-21', '2025-11-12'),
       ('Chi', 6, 'Kythira', 13, '2021-01-01', '2024-11-23'),
       ('Psi', 96, 'Skyros', 31, '2022-04-11', '2025-08-10'),
       ('Omega', 79, 'Samothrace', 92, '2019-11-16', '2025-05-13');
INSERT INTO tags(name)
VALUES ('text'),
       ('porta'),
       ('nonummy'),
       ('ligula'),
       ('senectus'),
       ('eget'),
       ('sem'),
       ('Sed'),
       ('arcu'),
       ('Suspendisse'),
       ('Pellentesque'),
       ('Donec'),
       ('viverra'),
       ('felis'),
       ('consequat'),
       ('euismod'),
       ('Vestibulum'),
       ('gravida');

INSERT INTO certificate_tag(certificate_id, tag_id)
VALUES (1, 11),
       (1, 16),
       (1, 6),
       (1, 8),
       (1, 9),
       (10, 16),
       (10, 7),
       (11, 12),
       (11, 4),
       (12, 11),
       (12, 12),
       (12, 14),
       (12, 18),
       (12, 2),
       (12, 7),
       (12, 9),
       (13, 10),
       (13, 14),
       (13, 4),
       (13, 8),
       (14, 6),
       (14, 9),
       (15, 11),
       (15, 14),
       (15, 16),
       (15, 17),
       (15, 2),
       (15, 9),
       (16, 17),
       (16, 5),
       (16, 7),
       (17, 1),
       (17, 10),
       (17, 12),
       (17, 9),
       (18, 16),
       (18, 3),
       (18, 5),
       (18, 8),
       (19, 1),
       (19, 10),
       (19, 11),
       (19, 13),
       (19, 14),
       (19, 9),
       (2, 10),
       (2, 11),
       (2, 15),
       (2, 16),
       (2, 17),
       (2, 2),
       (2, 7),
       (20, 10),
       (20, 11),
       (20, 17),
       (20, 18),
       (20, 4),
       (20, 5),
       (20, 7),
       (20, 9),
       (21, 1),
       (21, 10),
       (21, 14),
       (21, 5),
       (21, 6),
       (21, 9),
       (22, 10),
       (22, 13),
       (22, 15),
       (22, 17),
       (22, 4),
       (22, 7),
       (23, 11),
       (23, 18),
       (23, 3),
       (24, 1),
       (24, 17),
       (24, 8),
       (3, 1),
       (3, 4),
       (3, 6),
       (3, 7),
       (4, 1),
       (4, 14),
       (4, 4),
       (4, 5),
       (4, 8),
       (5, 13),
       (5, 16),
       (5, 17),
       (5, 2),
       (5, 3),
       (5, 9),
       (6, 13),
       (6, 15),
       (6, 16),
       (6, 17),
       (6, 3),
       (6, 5),
       (6, 9),
       (7, 12),
       (7, 18),
       (7, 9),
       (8, 11),
       (8, 16),
       (9, 18),
       (9, 2),
       (9, 6);
INSERT INTO users(email, first_name, last_name, password)
VALUES ('gwyn@gmail.com', 'Gwyn', 'Bernhard', '493422302527023'),
       ('erik@gmail.com', 'Erik', 'Graham', '331437027866841'),
       ('renea@gmail.com', 'Renea', 'Becker', '542883848662361'),
       ('shawn@gmail.com', 'Shawn', 'Ankunding', '443184578338854'),
       ('anderson@gmail.com', 'Anderson', 'Turner', '866172226827558'),
       ('marguerita@gmail.com', 'Marguerita', 'OHara', '916884050051457'),
       ('cris@gmail.com', 'Cris', 'Bins', '992586805835889'),
       ('jeanmarie@gmail.com', 'Jeanmarie', 'Hauck', '532551253216468'),
       ('garth@gmail.com', 'Garth', 'Wiegand', '013225342128285'),
       ('miles@gmail.com', 'Miles', 'Jacobs', '442584512348185'),
       ('joey@gmail.com', 'Joey', 'Hudson', '516821311152181'),
       ('jessika@gmail.com', 'Jessika', 'Hessel', '455737332516217'),
       ('jorge@gmail.com', 'Jorge', 'Hoeger', '495267534708836'),
       ('evangeline@gmail.com', 'Evangeline', 'Wintheiser', '352872743507283'),
       ('wes@gmail.com', 'Wes', 'Crooks', '331835676810426');
INSERT INTO orders(certificate_id, order_date, order_price, user_id)
VALUES (3, '2022-02-17', 430, 2),
       (4, '2023-06-23', 717, 15),
       (4, '2022-01-07', 717, 10),
       (4, '2023-02-10', 717, 14),
       (4, '2023-03-01', 717, 8),
       (5, '2022-08-20', 20, 12),
       (5, '2022-02-10', 20, 5),
       (5, '2023-03-18', 20, 8),
       (6, '2022-05-09', 564, 11),
       (6, '2022-04-20', 564, 10),
       (7, '2023-06-26', 835, 2),
       (7, '2022-02-28', 835, 6),
       (8, '2023-04-26', 452, 10),
       (8, '2022-02-09', 452, 12),
       (8, '2023-03-16', 452, 3),
       (9, '2022-03-13', 343, 4),
       (9, '2023-05-17', 343, 6),
       (12, '2022-11-07', 282, 2),
       (12, '2022-10-02', 282, 13),
       (12, '2023-06-05', 282, 7),
       (13, '2022-09-11', 497, 15),
       (1, '2022-06-30', 497, 13),
       (2, '2022-03-27', 497, 2),
       (13, '2023-03-06', 497, 5),
       (13, '2023-01-20', 497, 12),
       (14, '2023-02-26', 981, 5),
       (14, '2023-06-13', 981, 12),
       (14, '2022-04-05', 981, 9),
       (14, '2022-02-19', 981, 4),
       (15, '2023-06-18', 689, 10),
       (16, '2022-10-20', 278, 8),
       (16, '2023-01-25', 278, 15),
       (16, '2022-05-01', 278, 3),
       (16, '2023-05-30', 278, 13),
       (17, '2022-04-21', 490, 8),
       (17, '2022-09-18', 490, 5),
       (17, '2022-12-10', 490, 1),
       (17, '2022-06-13', 490, 7),
       (17, '2023-01-07', 490, 4),
       (18, '2022-04-18', 58, 4),
       (18, '2022-03-31', 58, 13),
       (18, '2023-05-25', 58, 3),
       (19, '2022-09-11', 784, 10),
       (19, '2023-06-28', 784, 12),
       (19, '2022-09-26', 784, 2),
       (19, '2022-03-24', 784, 4),
       (19, '2022-03-24', 784, 2),
       (20, '2023-06-08', 846, 12),
       (21, '2022-07-29', 235, 13),
       (22, '2022-10-20', 330, 4),
       (24, '2023-06-28', 377, 14),
       (24, '2023-05-25', 377, 7),
       (24, '2023-06-10', 377, 12),
       (24, '2022-06-30', 377, 12),
       (24, '2023-05-13', 377, 9);

